
\begin{algorithm}[H]
\caption{}
\begin{algorithmic}[1]
\Function{Solve}{\param{in}{floorLength}{Integer},\param{in}{floorCount}{Integer}, \param{in}{portals}{List<Portal>}}
{$\ensuremath{\rightarrow}$ \param{out}{res}{List<Grid>}}
\state Grid grid $\gets$ Grid(floorLength, floorCount, portals)
\state array time $\gets$ int[grid.getNodesCount()]
\state fill(time, -1)
\state queue $\gets$ <>
\state time[grid.getEntryCellId()] $\gets$ 0
\state exitCellId $\gets$ grid.getExitCellId()
\state queue.add(grid.getEntryCellId())
\while{queue $\neq$ <> and time[exitCellId] $\neq -1$}
\state current $\gets$ cola.poll()

\For{neighbour $\in$ grid.getNeighbours(current)}
\If{time[neighbour] == -1}
\state time[neighbour] $\gets$ time[current] + 1
\state queue.add(neighbour)
\endif
\EndFor
\endwhile
\state res $\gets$ time[exitCellId]
\EndFunction 
\end{algorithmic}
\hrule
\complejidad{NL + P}
\end{algorithm}

\begin{algorithm}[H]
\caption{}
\begin{algorithmic}[1]
\Function{BuildGrid}{\param{in}{floorLength}{Integer}, \param{in}{lastFloor}{Integer}}\param{in}{portals}{List<Portal>}
{$\ensuremath{\rightarrow}$ \param{out}{res}{Grid}}
\state Grid res $\gets$ Grid()
\state res.floorLength $\gets$ floorLength +1
\state res.floorCount $\gets$ lastFloor + 1
\state res.neighbours $\gets$ <>

\For{floor $=0 \to$ res.floorCount}
	\For{distance $= 0 \to$ res.floorLength}
		\state cellNeighbours $\gets$ <>
		\If{distance $> 0$}
			\state cellNeighbours.add(getCellId(floor, distance - 1))
		\endif
		\If{distance $< 0$}
			\state cellNeighbours.add(getCellId(floor, distance + 1))
		\endif
		\state res.neighbours.add(cellNeighbours)	
	\EndFor
\EndFor

\For{portal $\in$ portals}
	\state portalId $\gets$ grid.neighbours.size()
	\state portalNeighbours $\gets$ <>
	\state fromId $\gets$ getCellId(portal.firstFloor, portal.firstDistance)
	\state toId $\gets$ getCellId(portal.secondFloor, portal.secondDistance)
	\state portalNeighbours[fromId].add(portalId)
	\state portalNeighbours[toId].add(portalId)
	\state res.neighbours.add(portalNeighbours)
\EndFor

\EndFunction 
\end{algorithmic}
\hrule
\complejidad{NL + P}
\end{algorithm}